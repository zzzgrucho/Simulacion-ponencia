<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actualizaci√≥n del Sistema Requerida</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        
        .loading-screen {
            max-width: 600px;
            padding: 40px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #0fccce;
        }
        
        .progress-container {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 30px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0fccce, #2de2e6);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .status {
            color: #b8b8b8;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .warning {
            color: #e94560;
            margin-top: 30px;
            font-size: 0.9rem;
        }
        
        .blink {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <h1>Actualizaci√≥n de Seguridad del Sistema</h1>
        <div class="status" id="status">Inicializando servicios de seguridad...</div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="status">No apague el dispositivo durante este proceso</div>
        <div class="warning blink">CONECTADO AL SERVIDOR DE SEGURIDAD CENTRAL</div>
    </div>

    <script>
        // Mensajes para las alertas popup
        const alertMessages = [
            "¬°ALERTA CR√çTICA! Se ha detectado software malicioso en su sistema.",
            "¬°ADVERTENCIA! Su informaci√≥n personal est√° siendo accedida por terceros.",
            "¬°VIOLACI√ìN DE SEGURIDAD! Se detect√≥ acceso no autorizado a sus cuentas.",
            "¬°EMERGENCIA! Su dispositivo ha sido comprometido.",
            "¬°AMENAZA INMINENTE! Ransomware detectado en el sistema.",
            "¬°ALERTA! Su c√°mara y micr√≥fono est√°n siendo controlados remotamente.",
            "¬°PELIGRO! Datos bancarios en riesgo de exposici√≥n.",
            "¬°INTRUSI√ìN! Conexi√≥n sospechosa desde ubicaci√≥n remota.",
            "¬°ADVERTENCIA! Software esp√≠a activo en su dispositivo.",
            "¬°CRISIS! Secuestro de informaci√≥n en progreso."
        ];

        let alertCount = 0;
        const totalAlerts = 12;
        let simulationActive = true;

        // Funci√≥n para crear alertas popup reales
        function createPopupAlert() {
            if (!simulationActive) return;
            
            const randomMessage = alertMessages[Math.floor(Math.random() * alertMessages.length)];
            
            // Crear m√∫ltiples alertas para hacerlo m√°s ca√≥tico
            setTimeout(() => {
                if (simulationActive) {
                    alert("‚ö†Ô∏è " + randomMessage + "\n\nC√≥digo de error: 0x" + Math.random().toString(16).substr(2, 8).toUpperCase());
                }
            }, Math.random() * 1000);
            
            alertCount++;
            
            if (alertCount < totalAlerts) {
                // Programar la siguiente alerta con tiempo aleatorio
                setTimeout(createPopupAlert, 1500 + Math.random() * 2000);
            } else {
                // Alerta final m√°s dram√°tica
                setTimeout(() => {
                    if (simulationActive) {
                        alert("üö® FALLO CR√çTICO DEL SISTEMA\n\nEl dispositivo requiere intervenci√≥n inmediata.\n\nContacte al soporte t√©cnico.\n\nC√≥digo de emergencia: RED_ALERT_" + Date.now());
                    }
                    endSimulation();
                }, 2000);
            }
        }

        // Funci√≥n para crear ventanas emergentes adicionales
        function createAdditionalPopups() {
            if (!simulationActive) return;
            
            const popupTexts = [
                "Sistema comprometido",
                "Alerta de seguridad",
                "Virus detectado",
                "Acceso no autorizado",
                "Datos en peligro"
            ];
            
            const text = popupTexts[Math.floor(Math.random() * popupTexts.length)];
            const left = Math.random() * (screen.width - 400);
            const top = Math.random() * (screen.height - 300);
            
            try {
                const popup = window.open('', '_blank', `width=300,height=200,left=${left},top=${top}`);
                if (popup) {
                    popup.document.write(`
                        <html>
                            <head><title>Alerta del Sistema</title></head>
                            <body style="background:#1a1a2e;color:white;font-family:Arial;padding:20px;text-align:center;">
                                <h3 style="color:#e94560;">‚ö†Ô∏è ${text}</h3>
                                <p>Su sistema requiere atenci√≥n inmediata</p>
                                <button onclick="window.close()" style="background:#e94560;color:white;border:none;padding:8px 16px;margin:10px;cursor:pointer;">
                                    Cerrar
                                </button>
                            </body>
                        </html>
                    `);
                    
                    // Cerrar autom√°ticamente despu√©s de un tiempo
                    setTimeout(() => {
                        if (!popup.closed) popup.close();
                    }, 3000 + Math.random() * 4000);
                }
            } catch (e) {
                // Ignorar errores de bloqueo de popups
            }
        }

        // Funci√≥n para finalizar la simulaci√≥n
        function endSimulation() {
            simulationActive = false;
            
            // Cerrar todas las ventanas emergentes que podamos
            try {
                const popups = window.open('', '_self');
                window.close();
            } catch (e) {
                // Ignorar errores
            }
            
            // Mostrar mensaje final despu√©s de un momento
            setTimeout(() => {
                document.getElementById('loadingScreen').innerHTML = `
                    <h1 style="color:#0fccce;">¬°Simulaci√≥n Completada!</h1>
                    <div style="background:rgba(15,204,206,0.1);padding:25px;border-radius:15px;margin:25px 0;border-left:4px solid #0fccce;">
                        <h3 style="color:#0fccce;margin-bottom:15px;">Esta fue una demostraci√≥n educativa</h3>
                        <p style="text-align:left;line-height:1.6;margin-bottom:15px;">
                            ‚ö†Ô∏è <strong>Los c√≥digos QR maliciosos pueden:</strong><br>
                            ‚Ä¢ Redirigirte a sitios phishing<br>
                            ‚Ä¢ Descargar malware autom√°ticamente<br>
                            ‚Ä¢ Robar tu informaci√≥n personal<br>
                            ‚Ä¢ Tomar control de tu dispositivo
                        </p>
                        <p style="text-align:left;line-height:1.6;">
                            ‚úÖ <strong>Prot√©gete:</strong><br>
                            ‚Ä¢ Verifica la fuente del c√≥digo QR<br>
                            ‚Ä¢ Usa aplicaciones de escaneo seguras<br>
                            ‚Ä¢ Mant√©n tu sistema actualizado<br>
                            ‚Ä¢ No escanees c√≥digos sospechosos
                        </p>
                    </div>
                    <button onclick="location.reload()" style="background:#e94560;color:white;border:none;padding:12px 30px;border-radius:25px;cursor:pointer;font-size:1.1rem;margin:10px;">
                        Ver Simulaci√≥n Nuevamente
                    </button>
                `;
            }, 2000);
        }

        // Simular progreso de carga
        function simulateLoading() {
            let progress = 0;
            const progressBar = document.getElementById('progressBar');
            const status = document.getElementById('status');
            const statusMessages = [
                "Inicializando servicios de seguridad...",
                "Analizando integridad del sistema...",
                "Escaneando en busca de vulnerabilidades...",
                "Verificando certificados de seguridad...",
                "Conectando con servidor central...",
                "Descargando actualizaciones cr√≠ticas...",
                "Configurando protocolos de protecci√≥n...",
                "Proceso casi completado..."
            ];
            
            let messageIndex = 0;
            
            const loadingInterval = setInterval(() => {
                progress += 2 + Math.random() * 3;
                if (progress > 100) progress = 100;
                
                progressBar.style.width = progress + '%';
                
                // Cambiar mensaje cada cierto progreso
                if (progress >= (messageIndex + 1) * (100 / statusMessages.length)) {
                    if (messageIndex < statusMessages.length) {
                        status.textContent = statusMessages[messageIndex];
                        messageIndex++;
                    }
                }
                
                // Iniciar las alertas cuando el progreso llegue a 45%
                if (progress >= 45 && alertCount === 0) {
                    createPopupAlert();
                    // Iniciar popups adicionales
                    setInterval(createAdditionalPopups, 4000);
                }
                
                if (progress >= 100) {
                    clearInterval(loadingInterval);
                }
            }, 200);
        }

        // Iniciar la simulaci√≥n cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Peque√±a demora para hacerlo m√°s cre√≠ble
            setTimeout(simulateLoading, 1000);
            
            // Intentar fullscreen para mayor impacto (solo funciona con interacci√≥n del usuario)
            document.addEventListener('click', function() {
                try {
                    document.documentElement.requestFullscreen().catch(e => {});
                } catch (e) {}
            });
            
            // Prevenir que el usuario salga f√°cilmente
            window.onbeforeunload = function() {
                if (simulationActive) {
                    return "¬øEst√° seguro de que quiere salir? El proceso de seguridad a√∫n est√° en curso.";
                }
            };
        });

        // Hacer que el clic derecho no funcione (para mayor realismo)
        document.addEventListener('contextmenu', function(e) {
            if (simulationActive) {
                e.preventDefault();
                alert("Acci√≥n no permitida durante actualizaci√≥n de seguridad");
                return false;
            }
        });

        // Prevenir atajos de teclado
        document.addEventListener('keydown', function(e) {
            if (simulationActive) {
                // Bloquear F12, Ctrl+Shift+I, etc.
                if (e.key === 'F12' || 
                   (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                   (e.ctrlKey && e.key === 'u')) {
                    e.preventDefault();
                    alert("Acceso denegado durante proceso de seguridad");
                    return false;
                }
                
                // Permitir Escape solo despu√©s de varias alertas
                if (e.key === 'Escape' && alertCount < 3) {
                    e.preventDefault();
                    alert("No puede cancelar el proceso de seguridad en este momento");
                    return false;
                }
            }
        });
    </script>
</body>
</html>